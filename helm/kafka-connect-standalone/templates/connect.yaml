apiVersion: platform.confluent.io/v1beta1
kind: Connect
metadata:
  name: connect
  namespace: {{ .Values.namespace }}
spec:
  replicas: {{ .Values.connect.replicaCount }}
  imagePullPolicy: {{ .Values.connect.image.pullPolicy }}
  image:
    application: "{{ .Values.connect.image.repository }}:{{ .Values.connect.image.tag }}"
    init: "{{ .Values.connect.initImage.repository }}:{{ .Values.connect.initImage.tag }}"
  tls:
    autoGeneratedCerts: true
  mountedSecrets:
    - secretRef: kafka-client-config-secure
  dependencies:
    kafka:
      bootstrapEndpoint: "{{ .Values.cloudKafkaURL }}:{{ .Values.cloudKafkaPort }}"
      authentication:
        type: plain
        jaasConfig:
          secretRef: cloud-plain
      tls:
        enabled: true
        ignoreTrustStoreConfig: true 