apiVersion: platform.confluent.io/v1beta1
kind: Connect
metadata:
  name: connect
  namespace: {{ .Values.namespace }}
spec:
  replicas: {{ .Values.connect.replicaCount }}
  image:
    application: "{{ .Values.connect.image.repository }}:{{ .Values.connect.image.tag }}"
    init: "{{ .Values.connect.initImage.repository }}:{{ .Values.connect.initImage.tag }}"
  tls:
    autoGeneratedCerts: true
  mountedSecrets:
    - secretRef: {{ .Values.secrets.kafkaProperties.name }}
  dependencies:
    kafka:
      bootstrapEndpoint: "{{ .Values.cloudKafkaURL }}:{{ .Values.cloudKafkaPort }}"
      authentication:
        type: {{ .Values.secrets.kafkaBrokerUser.type }}
        jaasConfig:
          secretRef: {{ .Values.secrets.kafkaBrokerUser.name }}
      tls:
        enabled: true
        ignoreTrustStoreConfig: true 